# Flat File Ingestion Sample Project

This folder contains sample data files and configurations for testing the flat file ingestion package.

## Synthetic Data Integration

The flat file ingestion package now uses parquet files generated by the synthetic data generator package for sample configurations. This provides more realistic test data and demonstrates the integration between packages.

## Sample Configurations

The DDL scripts include sample configuration records that reference synthetic data parquet files:

### Lakehouse Configurations (execution_group=1)
- `synthetic_customers_001`: Points to Files/synthetic_data/retail_oltp_small/customers.parquet
- `synthetic_products_002`: Points to Files/synthetic_data/retail_oltp_small/products.parquet
- `synthetic_orders_003`: Points to Files/synthetic_data/retail_oltp_small/orders.parquet
- `synthetic_order_items_004`: Points to Files/synthetic_data/retail_oltp_small/order_items.parquet

### Warehouse Configurations (execution_group=2)
- `synthetic_customers_warehouse_001`: Points to customers.parquet (warehouse target)
- `synthetic_products_warehouse_002`: Points to products.parquet (warehouse target)
- `synthetic_orders_warehouse_003`: Points to orders.parquet (warehouse target)

## Prerequisites

Before running the flat file ingestion:

1. Generate synthetic data using the synthetic data generator package:
   ```bash
   ingen_fab package synthetic-data generate retail_oltp_small --target-rows 1000 --output-mode parquet
   ```

2. This will create the required parquet files in Files/synthetic_data/retail_oltp_small/

## Usage

1. Generate synthetic data parquet files (see Prerequisites)
2. Run the DDL scripts to create tables and insert sample configurations
3. Execute the flat file ingestion processor with execution_group=1 or 2
4. Verify the data has been loaded into the raw schema tables:
   - raw.synthetic_customers
   - raw.synthetic_products  
   - raw.synthetic_orders
   - raw.synthetic_order_items

## Legacy Sample Files

The original static sample files are still available in the sample_data/ folder:
- customers.parquet (12 records)
- products.parquet (5 records)
- sales_data.csv (12 records)

These files can be used for basic testing but the synthetic data provides more comprehensive test scenarios.